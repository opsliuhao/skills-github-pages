---
title: "利用AOP实现公共字段注入"
date: 2024-12-04
---

### 代码

```
@Slf4j
@ControllerAdvice(annotations = {RestController.class, Controller.class})
public class GlobalExceptionHandler {

    @ResponseBody
    @ExceptionHandler(SQLIntegrityConstraintViolationException.class)
    public R<?> SqlExceptionHandle(Exception e){
        if (e.getClass().equals(DuplicateKeyException.class)) {
            return R.error(CodeEnum.ADD_ERROR);
        }
        else{
            log.error(e.getMessage());
            return R.error(CodeEnum.UNKNOWN_ERROR);
        }
    }

    @ResponseBody
    @ExceptionHandler(CategoryDeleteException.class)
    public R<?> CategoryDeleteExceptionHandle(Exception e){
        CategoryDeleteException ex = (CategoryDeleteException) e;
        CodeEnum codeEnum = ex.getCodeEnum();
        return R.error(codeEnum);
    }


}
```
